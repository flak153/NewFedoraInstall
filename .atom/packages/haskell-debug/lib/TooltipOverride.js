"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class TooltipOverride {
    constructor(resolveExpression) {
        this.resolveExpression = resolveExpression;
    }
    async tooltipHandler(editor, crange) {
        let range = crange;
        if (range.isEmpty()) {
            range = editor.bufferRangeForScopeAtPosition('identifier.haskell', range.start);
        }
        if (!range || range.isEmpty()) {
            return undefined;
        }
        const debugValue = await this.resolveExpression(editor.getTextInBufferRange(range));
        if (debugValue !== undefined) {
            return { range, text: debugValue };
        }
        return undefined;
    }
}
exports.TooltipOverride = TooltipOverride;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVG9vbHRpcE92ZXJyaWRlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL2xpYi9Ub29sdGlwT3ZlcnJpZGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFHQTtJQUNFLFlBQW9CLGlCQUFzRTtRQUF0RSxzQkFBaUIsR0FBakIsaUJBQWlCLENBQXFEO0lBQzFGLENBQUM7SUFFTSxLQUFLLENBQUMsY0FBYyxDQUFDLE1BQTRCLEVBQUUsTUFBdUI7UUFFL0UsSUFBSSxLQUFLLEdBQWdDLE1BQU0sQ0FBQTtRQUMvQyxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ3BCLEtBQUssR0FBRyxNQUFNLENBQUMsNkJBQTZCLENBQUMsb0JBQW9CLEVBQUUsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFBO1FBQ2pGLENBQUM7UUFDRCxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssSUFBSSxLQUFLLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQzlCLE1BQU0sQ0FBQyxTQUFTLENBQUE7UUFDbEIsQ0FBQztRQUNELE1BQU0sVUFBVSxHQUFHLE1BQU0sSUFBSSxDQUFDLGlCQUFpQixDQUFDLE1BQU0sQ0FBQyxvQkFBb0IsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFBO1FBQ25GLEVBQUUsQ0FBQyxDQUFDLFVBQVUsS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDO1lBQzdCLE1BQU0sQ0FBQyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFLENBQUE7UUFDcEMsQ0FBQztRQUNELE1BQU0sQ0FBQyxTQUFTLENBQUE7SUFDbEIsQ0FBQztDQUNGO0FBbkJELDBDQW1CQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIEF0b21UeXBlcyBmcm9tICdhdG9tJ1xuaW1wb3J0ICogYXMgVVBJIGZyb20gJ2F0b20taGFza2VsbC11cGknXG5cbmV4cG9ydCBjbGFzcyBUb29sdGlwT3ZlcnJpZGUge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlc29sdmVFeHByZXNzaW9uOiAoZXhwcmVzc2lvbjogc3RyaW5nKSA9PiBQcm9taXNlPHN0cmluZyB8IHVuZGVmaW5lZD4pIHtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyB0b29sdGlwSGFuZGxlcihlZGl0b3I6IEF0b21UeXBlcy5UZXh0RWRpdG9yLCBjcmFuZ2U6IEF0b21UeXBlcy5SYW5nZSlcbiAgICA6IFByb21pc2U8VVBJLklUb29sdGlwRGF0YSB8IHVuZGVmaW5lZD4ge1xuICAgIGxldCByYW5nZTogQXRvbVR5cGVzLlJhbmdlIHwgdW5kZWZpbmVkID0gY3JhbmdlXG4gICAgaWYgKHJhbmdlLmlzRW1wdHkoKSkge1xuICAgICAgcmFuZ2UgPSBlZGl0b3IuYnVmZmVyUmFuZ2VGb3JTY29wZUF0UG9zaXRpb24oJ2lkZW50aWZpZXIuaGFza2VsbCcsIHJhbmdlLnN0YXJ0KVxuICAgIH1cbiAgICBpZiAoIXJhbmdlIHx8IHJhbmdlLmlzRW1wdHkoKSkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cbiAgICBjb25zdCBkZWJ1Z1ZhbHVlID0gYXdhaXQgdGhpcy5yZXNvbHZlRXhwcmVzc2lvbihlZGl0b3IuZ2V0VGV4dEluQnVmZmVyUmFuZ2UocmFuZ2UpKVxuICAgIGlmIChkZWJ1Z1ZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiB7IHJhbmdlLCB0ZXh0OiBkZWJ1Z1ZhbHVlIH1cbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG59XG4iXX0=